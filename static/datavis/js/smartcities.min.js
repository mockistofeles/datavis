"use strict";var app=angular.module("DatavisApp",[]);app.controller("GraphController",function($scope){var example=[4,8,19,16,23,60],width=420,barHeight=20,x=d3.scaleLinear().domain([0,d3.max(example)]).range([0,width]),chart=d3.select(".chart").attr("width",width).attr("height",barHeight*example.length),bar=chart.selectAll("g").data(example).enter().append("g").attr("transform",function(d,i){return"translate(0,"+i*barHeight+")"});bar.append("rect").attr("width",x).attr("height",barHeight-1),bar.append("text").attr("x",function(d){return x(d)-3}).attr("y",barHeight/2).attr("dy",".35em").text(function(d){return d}),$scope.datatable=ds,console.log(ds),console.log($scope.datatable);for(var i=0;i<ds.length;i++)console.log(ds[i]),console.log("Producto: "+ds[i].producto+", Cantidad: "+ds[i].cantidad)}),$(document).ready(function(){function getCookie(name){var cookieValue=null;if(document.cookie&&""!==document.cookie)for(var cookies=document.cookie.split(";"),i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)===name+"="){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break}}return cookieValue}function csrfSafeMethod(method){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(method)}var csrftoken=getCookie("csrftoken");$("#ods").on("change",function(){console.log("topic: "+$("#topic").val()),console.log("ods: "+$("#ods").val()),$.ajax({beforeSend:function(xhr,settings){csrfSafeMethod(settings.type)||this.crossDomain||xhr.setRequestHeader("X-CSRFToken",csrftoken)},url:"datavis/filter/",type:"POST",data:{topic:$("#topic").val(),ods:$("#ods").val()},success:function(json){console.log("result: "+json)},error:function(xhr,errmsg,err){console.log("error: "+xhr.status+" "+xhr.responseText)}})})});